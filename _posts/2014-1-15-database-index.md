---
title: Database-Index
author: JinMa
layout: post
category : 数据库
permalink:  /database-index/
tags: 
  - MySQL
---

在操作MySQL数据库的时，可以为每一张表中的每一列都设置成不同的键，比如：主键、唯一键、自增主键、外键等等。那么这些键都起着什么样的作用呢？其实这些操作就是为此表中添加了不同的“索引”。本文将为你介绍索引。

##**主要内容**

*   什么是索引
*   索引包括哪些
*   如何选择索引

<!--more-->

##**一、什么是索引** 

索引是对数据库表中一列或多列的值进行排序的一种结构，使用索引可快速访问数据库表中的特定信息。 如果把数据库比喻成一本字典，那么索引就是字典的目录。很明显其作用就是快速的定位到你要查询的信息。索引就是我们常说的“键”。


例如我们创建了一个表:CREATE TABLE Stu( id  INT NOT NULL, name CHAR(50) NOT NULL );
随后我们随机的为此表中插入1000条数据。然后我如果我想查到姓名为“xiaoming”的学生。
此时我们就  SELECT * FROM Stu WHERE name=\'xiaoming\';这时，如果我们没有为此表中的name字段添加索引，那么数据库就会从第0条记录开始查找，直到找到所有的name为“xiaoming”的信息。可见这种效率就会很低，那么如果为name列添加了一个索引，那么结果会是怎样呢？如果我们为name字段添加了索引，那么在数据库的内部会为这一列做排序。这是我们执行上面的查询操作就会马上定位到name等与xiaoming的这一行。这是的效率就会比前者高的多！总而言之，但索引是经过某种算法优化过的，查找次数要少的多。可见，索引是用来定位的。



## **二、索引包括哪些** 

####**索引类型**



1.  普通索引
2.  唯一索引（UNIQUE）
3.  主键（PRIMARY KEY）
4.  唯一索引

####**普通索引**
创建索引，例如CREATE INDEX <索引的名字> ON tablename (列的列表); 
修改表，例如ALTER TABLE tablename ADD INDEX [索引的名字] (列的列表);
创建表的时候指定索引，例如CREATE TABLE tablename ( [...], INDEX [索引的名字] (列的列表) ); 

####**唯一索引**
创建索引，例如CREATE UNIQUE INDEX <索引的名字> ON tablename (列的列表); 
修改表，例如ALTER TABLE tablename ADD UNIQUE [索引的名字] (列的列表);
创建表的时候指定索引，例如CREATE TABLE tablename ( [...], UNIQUE [索引的名字] (列的列表) ); 
注意：
1.    一个表中可以有多个唯一性索引
2.    唯一性索引列允许空值

####**主键（PRIMARY KEY）**
主键是一种唯一性索引，但它必须指定为“PRIMARY KEY”。如果你曾经用过AUTO_INCREMENT类型的列，你可能已经熟悉主键之类的概念了。主键一般在创建表的时候指定，
例如“CREATE TABLE tablename ( [...], PRIMARY KEY (列的列表) ); ”。但是，我们也可以通过修改表的方式加入主键，例如“ALTER TABLE tablename ADD PRIMARY KEY (列的列表); ”。每个表只能有一个主键。
    
注意：
1.  主键不能重复
2.  一个表只能有一个主键
3.  主键默认是 NOT NULL
4.  唯一索引
5.  其他字段作外键引用必须是主键
6.  主键可以是组合的，每个列都会隐含定义NOT NULL约束，组合的每一列都可以单独重复，但是组合时候不能重复。
 
  
   
 
 
####**全文索引**

##**如何选择索引**###

首先，索引要占用磁盘空间。通常情况下，这个问题不是很突出。但是，如果你创建每一种可能列组合的索引，索引文件体积的增长速度将远远超过数据文件。如果你有一个很大的表，索引文件的大小可能达到操作系统允许的最大文件限制。
  
第二，对于需要写入数据的操作，比如DELETE、UPDATE以及INSERT操作，索引会降低它们的速度。这是因为MySQL不仅要把改动数据写入数据文件，而且它还要把这些改动写入索引文件。